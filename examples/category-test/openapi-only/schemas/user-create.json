{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Schema for creating a new user account",
  "properties": {
    "email": {
      "type": "string",
      "format": "email",
      "description": "User's email address (must be unique) - UPDATED VERSION2"
    },
    "name": {
      "type": "string",
      "minLength": 2,
      "maxLength": 100,
      "description": "User's full name"
    },
    "password": {
      "type": "string",
      "minLength": 8,
      "maxLength": 128,
      "description": "User's password (8-128 characters)"
    },
    "role": {
      "type": "string",
      "enum": ["user", "moderator", "admin"],
      "default": "user",
      "description": "User's role in the system"
    },
    "preferences": {
      "type": "object",
      "description": "User preferences configuration",
      "properties": {
        "theme": {
          "type": "string",
          "enum": ["light", "dark", "auto"],
          "default": "auto",
          "description": "UI theme preference"
        },
        "language": {
          "type": "string",
          "pattern": "^[a-z]{2}$",
          "default": "en",
          "description": "Language preference (ISO 639-1 code)"
        },
        "timezone": {
          "type": "string",
          "default": "UTC",
          "description": "Timezone identifier (IANA timezone)"
        },
        "notifications": {
          "type": "object",
          "description": "Notification preferences",
          "properties": {
            "email": {
              "type": "boolean",
              "default": true,
              "description": "Receive email notifications"
            },
            "push": {
              "type": "boolean",
              "default": true,
              "description": "Receive push notifications"
            },
            "sms": {
              "type": "boolean",
              "default": false,
              "description": "Receive SMS notifications"
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional user metadata",
      "properties": {
        "source": {
          "type": "string",
          "description": "Registration source (web, mobile, api)"
        },
        "referrer": {
          "type": "string",
          "description": "Referrer information"
        },
        "marketing_consent": {
          "type": "boolean",
          "default": false,
          "description": "User consents to marketing communications"
        }
      }
    }
  },
  "required": ["email", "name", "password"],
  "title": "User Creation Schema",
  "type": "object"
}
